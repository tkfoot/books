# Books Repository - ãƒ‡ãƒ¼ã‚¿å½¢å¼ä»•æ§˜

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯å°èª¬ãƒ»æ›¸ç±ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ç®¡ç†ã‚’è¡Œã†ã‚‚ã®ã§ã™ã€‚ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯è‡ªå‹•çš„ã«[novel-viewer](https://github.com/yar0316/novel-viewer)ã«åŒæœŸã•ã‚Œã¾ã™ã€‚

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
books/
â”œâ”€â”€ ä½œå“ãƒ•ã‚©ãƒ«ãƒ€1/
â”‚   â”œâ”€â”€ manuscript/
â”‚   â”‚   â”œâ”€â”€ info.yml          # ä½œå“æƒ…å ±
â”‚   â”‚   â”œâ”€â”€ chapter1.md       # å„ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ chapter2.md
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ characters/           # ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®šï¼ˆä»»æ„ï¼‰
â”‚   â”œâ”€â”€ world/               # ä¸–ç•Œè¨­å®šï¼ˆä»»æ„ï¼‰
â”‚   â””â”€â”€ plot/                # ãƒ—ãƒ­ãƒƒãƒˆï¼ˆä»»æ„ï¼‰
â”œâ”€â”€ ä½œå“ãƒ•ã‚©ãƒ«ãƒ€2/
â””â”€â”€ ...
```

## ğŸ“ å¿…é ˆãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼

### 1. ä½œå“æƒ…å ±ãƒ•ã‚¡ã‚¤ãƒ« (`info.yml`)

å„ä½œå“ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å®šç¾©ã—ã¾ã™ã€‚

```yaml
# å°èª¬ã®åŸºæœ¬æƒ…å ±
# id: 1                        # ä»»æ„: æ—¢å­˜ä½œå“ã®æ›´æ–°æ™‚ã®ã¿æŒ‡å®šï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹IDï¼‰
title: "ä½œå“ã‚¿ã‚¤ãƒˆãƒ«"            # å¿…é ˆ: è¡¨ç¤ºç”¨ã‚¿ã‚¤ãƒˆãƒ«
author: "è‘—è€…å"                # å¿…é ˆ: ä½œè€…å
description: |                 # å¿…é ˆ: ä½œå“æ¦‚è¦
  ä½œå“ã®èª¬æ˜æ–‡
  è¤‡æ•°è¡Œå¯èƒ½
genre: "ã‚¸ãƒ£ãƒ³ãƒ«"               # å¿…é ˆ: ä½œå“ã‚¸ãƒ£ãƒ³ãƒ«
tags:                          # ä»»æ„: ã‚¿ã‚°ãƒªã‚¹ãƒˆ
  - "ã‚¿ã‚°1"
  - "ã‚¿ã‚°2"
status: "é€£è¼‰ä¸­"               # å¿…é ˆ: é€£è¼‰ä¸­/å®Œçµ/ä¼‘è¼‰
published: true                # å¿…é ˆ: å…¬é–‹ãƒ•ãƒ©ã‚°ï¼ˆtrue: å…¬é–‹, false: éå…¬é–‹ï¼‰
updated: false                 # å¿…é ˆ: æ›´æ–°ãƒ•ãƒ©ã‚°ï¼ˆtrue: æ›´æ–°, false: æ–°è¦ä½œæˆï¼‰
created_at: "2025-07-14"       # å¿…é ˆ: ä½œæˆæ—¥(YYYY-MM-DD)
```

#### ä½œå“ã®å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯
- **æ–°è¦ä½œæˆ**: `id`ã‚’æŒ‡å®šã›ãšã€`updated: false`
- **æ—¢å­˜æ›´æ–°**: `id`ã‚’æŒ‡å®šã—ã€`updated: true`
- **éå…¬é–‹**: `published: false`ï¼ˆå‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼‰
- **ç„¡è¦–**: `id`æŒ‡å®šã‚ã‚Š + `updated: false`ï¼ˆå‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼‰

### 2. ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ« (`.md`)

å„ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ãƒ»ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚**å¿…é ˆã®frontmatter**ãŒå¿…è¦ã§ã™ã€‚

```markdown
---
id: "episode-001"              # å¿…é ˆ: ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰å›ºæœ‰ID
title: "ç¬¬1è©± å§‹ã¾ã‚Šã®ç‰©èª"     # å¿…é ˆ: ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«
episode_number: 1              # å¿…é ˆ: ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ç•ªå·ï¼ˆæ•´æ•°ï¼‰
published_at: "2025-07-14"    # ä»»æ„: å…¬é–‹æ—¥(YYYY-MM-DD)
status: "new"                  # å¿…é ˆ: ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
---

# ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«

æœ¬æ–‡å†…å®¹...
```

#### ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
- **`new`**: æ–°è¦è¿½åŠ ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«INSERTï¼‰
- **`updated`**: æ›´æ–°ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’UPDATEï¼‰
- **`draft`**: ä¸‹æ›¸ãï¼ˆå‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼‰
- **`deleted`**: å‰Šé™¤ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰DELETEï¼‰

## âœ… å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

### info.yml
- `title`: ä½œå“ã‚¿ã‚¤ãƒˆãƒ«
- `author`: è‘—è€…å
- `description`: ä½œå“èª¬æ˜
- `genre`: ã‚¸ãƒ£ãƒ³ãƒ«
- `status`: é€£è¼‰çŠ¶æ³
- `published`: å…¬é–‹ãƒ•ãƒ©ã‚°
- `updated`: æ›´æ–°ãƒ•ãƒ©ã‚°
- `created_at`: ä½œæˆæ—¥

### ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«
- `id`: ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰å›ºæœ‰IDï¼ˆé‡è¤‡ç¦æ­¢ï¼‰
- `title`: ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«
- `episode_number`: ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ç•ªå·ï¼ˆæ•´æ•°ã€ä¸¦ã³é †æ±ºå®šã«ä½¿ç”¨ï¼‰
- `status`: ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆnew/updated/draft/deletedï¼‰

## ğŸš« ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼

ä»¥ä¸‹ã®å ´åˆã€GitHub Actionsã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ï¼š

1. **frontmatterã®ä¸å‚™**
   - `id`ã€`title`ã€`episode_number`ã€`status`ãŒæœªè¨­å®š
   - `episode_number`ãŒæ•´æ•°ã§ãªã„

2. **IDé‡è¤‡**
   - åŒã˜`id`ã®ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ãŒå­˜åœ¨

3. **ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼**
   - `.md`ãƒ•ã‚¡ã‚¤ãƒ«ãŒMarkdownå½¢å¼ã§ãªã„
   - info.ymlãŒYAMLå½¢å¼ã§ãªã„

4. **å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä¸è¶³**
   - `published`ã€`updated`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæœªè¨­å®š

## ğŸ“‹ ä½œæ¥­æ‰‹é †

### æ–°ã—ã„ä½œå“ã®è¿½åŠ 
```bash
mkdir æ–°ä½œå“å
cd æ–°ä½œå“å
mkdir manuscript
# info.ymlã¨ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
```

**info.yml**ï¼ˆæ–°è¦ä½œå“ï¼‰:
```yaml
title: "æ–°ä½œå“"
author: "ä½œè€…å"
description: "æ–°ã—ã„ä½œå“ã§ã™"
genre: "ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼"
status: "é€£è¼‰ä¸­"
published: true
updated: false  # æ–°è¦ä½œæˆ
created_at: "2025-07-17"
```

### æ—¢å­˜ä½œå“ã®æ›´æ–°
**info.yml**ï¼ˆæ—¢å­˜ä½œå“æ›´æ–°ï¼‰:
```yaml
id: 123  # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ID
title: "æ—¢å­˜ä½œå“ï¼ˆæ›´æ–°ç‰ˆï¼‰"
author: "ä½œè€…å"
description: "æ›´æ–°ã•ã‚ŒãŸä½œå“ã§ã™"
genre: "ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼"
status: "é€£è¼‰ä¸­"
published: true
updated: true  # æ›´æ–°ãƒ•ãƒ©ã‚°
created_at: "2025-07-17"
```

### ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã®ç®¡ç†

**æ–°è¦ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰**:
```markdown
---
id: "new-episode-001"
title: "æ–°ã—ã„ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰"
episode_number: 5
status: "new"
---
```

**æ—¢å­˜ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã®æ›´æ–°**:
```markdown
---
id: "existing-episode-001"
title: "æ›´æ–°ã•ã‚ŒãŸã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰"
episode_number: 1
status: "updated"
---
```

**ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã®å‰Šé™¤**:
```markdown
---
id: "delete-episode-001"
title: "å‰Šé™¤äºˆå®šã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰"
episode_number: 2
status: "deleted"
---
```

**ä¸‹æ›¸ãã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰**:
```markdown
---
id: "draft-episode-001"
title: "ä¸‹æ›¸ãã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰"
episode_number: 3
status: "draft"
---
```

## ğŸ”§ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œï¼š

```bash
python scripts/validate_data.py
```

## ğŸ“š ä¾‹

### å®Œå…¨ãªä¾‹

```
my-novel/
â”œâ”€â”€ manuscript/
â”‚   â”œâ”€â”€ info.yml
â”‚   â”œâ”€â”€ chapter1.md
â”‚   â””â”€â”€ chapter2.md
â””â”€â”€ characters/
    â””â”€â”€ protagonist.md
```

**info.yml**:
```yaml
title: "ç§ã®å°èª¬"
author: "ä½œè€…å"
description: "é¢ç™½ã„å°èª¬ã§ã™"
genre: "ãƒ•ã‚¡ãƒ³ã‚¿ã‚¸ãƒ¼"
status: "é€£è¼‰ä¸­"
published: true
updated: false
created_at: "2025-07-17"
```

**chapter1.md**:
```markdown
---
id: "my-novel-ch1"
title: "ç¬¬1ç«  å§‹ã¾ã‚Š"
episode_number: 1
status: "new"
published_at: "2025-07-17"
---

# ç¬¬1ç«  å§‹ã¾ã‚Š

ç‰©èªã®æœ¬æ–‡...
```

ã“ã®ä»•æ§˜ã«å¾“ã†ã“ã¨ã§ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒæ­£å¸¸ã«novel-viewerã«åŒæœŸã•ã‚Œã€é©åˆ‡ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

## ğŸ”„ åŒæœŸå‡¦ç†ã®æµã‚Œ

1. **ä½œå“ã®å‡¦ç†**
   - `published: false` â†’ ã‚¹ã‚­ãƒƒãƒ—
   - `published: true` + `id`ãªã— â†’ æ–°è¦ä½œæˆ
   - `published: true` + `id`ã‚ã‚Š + `updated: true` â†’ æ›´æ–°
   - `published: true` + `id`ã‚ã‚Š + `updated: false` â†’ ã‚¹ã‚­ãƒƒãƒ—

2. **ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã®å‡¦ç†**
   - `status: draft` â†’ ã‚¹ã‚­ãƒƒãƒ—
   - `status: new` â†’ æ–°è¦ä½œæˆ
   - `status: updated` â†’ æ›´æ–°
   - `status: deleted` â†’ å‰Šé™¤

ã“ã®ä»•çµ„ã¿ã«ã‚ˆã‚Šã€æŸ”è»Ÿã§åŠ¹ç‡çš„ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚